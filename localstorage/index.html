<!doctype html>
<html>
<head>
<title>HTML5 localStorage Demo</title>

<meta name="viewport" content="width=device-width"/> 
<meta charset="UTF-8"> 
<link rel="shortcut icon" href="images/favicon.ico" />
<link type="text/css" rel="stylesheet" href="style.css">
<link href="http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic|Pacifico" rel="stylesheet" type="text/css">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<div id="wrap">
<header>
	<h1><a href="http://www.thomashardy.me.uk" title="Home">Thomas Hardy</a></h1>
	<nav>
		<ul>
			<li><a href="http://www.thomashardy.me.uk/using-html5-localstorage-on-a-form" title="Back to article">Back to article</a></li>
		</ul>
	</nav>
	<div class="clear"></div>
</header>
<section id="demo">
<div id="influads_block" class="influads_block"> </div>
<script type="text/javascript">(function(){ var acc =   "acc_603d648_pub";var st ="css";var or= "h";var e=document.getElementsByTagName("script")[0];var d=document.createElement("script");d.src=('https:' == document.location.protocol ?'https://' : 'http://') +"engine.influads.com/show/"+or+"/"+st+"/"+acc;d.type="text/javascript"; d.async=true; d.defer=true; e.parentNode.insertBefore(d,e);})();</script>
         
		<h1>HTML5 localStorage Demo</h1>
		<p>The form below adds any data inputted into localStorage, it uses jQuery to do this. Then on submission of the form it clears the data from localStorage.</p> 
		<p>Go on fill in the form below close your browser and then come back to see your unsubmitted data still be there!</p>
		<form id="localStorageTest" method="post" action="">
			<label>Name:</label>
			<input type="text" name="name" id="name" class="stored" value="" />

			<label>Email:</label>
			<input type="email" name="email" id="email" class="stored" value="" />

			<label>Message:</label>
			<textarea name="message" id="message" class="stored"></textarea>
			 
			<input type="submit" class="demo-button" value="Submit" />
		</form>
</section>
</div>
<footer>
	&copy; Thomas Hardy
</footer>
<script type="text/javascript">
$(document).ready(function () {
    function init() {
        if (localStorage["name"]) {
            $('#name').val(localStorage["name"]);
        }
        if (localStorage["email"]) {
            $('#email').val(localStorage["email"]);
        }
		if (localStorage["message"]) {
            $('#message').val(localStorage["message"]);
        }
    }
	init();
});

$('.stored').change(function () {
    localStorage[$(this).attr('name')] = $(this).val();
});
	
$('#localStorageTest').submit(function() {
	localStorage.clear();
});
</script>
<script type="text/javascript">
(function( win ){
	var doc = win.document;
   	
	// If there's a hash, or addEventListener is undefined, stop here
	if( !location.hash && win.addEventListener ){
		//scroll to 1
		window.scrollTo( 0, 1 );
		var scrollTop = 1,
			getScrollTop = function(){
				return win.pageYOffset || doc.compatMode === "CSS1Compat" && doc.documentElement.scrollTop || doc.body.scrollTop || 0;
			},
			//reset to 0 on bodyready, if needed
			bodycheck = setInterval(function(){
				if( doc.body ){
					clearInterval( bodycheck );
					scrollTop = getScrollTop();
					win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
				}	
			}, 15 );
		win.addEventListener( "load", function(){
			setTimeout(function(){
					//reset to hide addr bar at onload
					win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
			}, 0);
		} );
	}
})( this );
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3753241-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>
</html>